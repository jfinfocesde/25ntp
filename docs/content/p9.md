#  Semana 9 - Filtrado de datos en Pandas con todas las formas y operadores 

El filtrado en Pandas es una de las tareas m√°s comunes y poderosas en el an√°lisis de datos. Permite seleccionar subconjuntos de datos que cumplen con condiciones espec√≠ficas, facilitando la exploraci√≥n, limpieza y an√°lisis de informaci√≥n. En este tutorial, exploraremos todas las formas de filtrar datos en Pandas, incluyendo operadores de comparaci√≥n, l√≥gicos, m√©todos como `query`, `isin`, `where`, `mask`, y m√°s, excluyendo expl√≠citamente los m√©todos `loc` e `iloc`. Para ilustrar cada t√©cnica, usaremos un DataFrame con datos ficticios pero realistas representativos de Colombia.

El objetivo es que, al final del tutorial, tengas un conocimiento profundo de c√≥mo filtrar datos en Pandas y puedas aplicar estas t√©cnicas en tus propios proyectos.

## Version Google Colab

Este tutorial se puede ejecutar en Google Colab. Para abrir el notebook en Colab, haz clic en el siguiente enlace:



[Abrir en Colab](https://colab.research.google.com/drive/1sMwItvwFZZ0vHSPemIJZVJKfbjFsb71G?usp=sharing){target = "_blank"}


## Creaci√≥n del DataFrame

Vamos a crear un DataFrame con **50 registros** que contenga informaci√≥n relevante para Colombia. Usaremos las bibliotecas `pandas`, `numpy` y `faker` (con localizaci√≥n `es_CO`) para generar datos realistas. Las columnas ser√°n:

- `id`: Identificador √∫nico (1 al 50).
- `nombre`: Nombres comunes en Colombia.
- `edad`: Edades entre 18 y 80 a√±os.
- `ciudad`: Ciudades colombianas.
- `departamento`: Departamentos correspondientes.
- `salario`: Salarios entre 1,000,000 y 10,000,000 COP.
- `nivel_educativo`: Primaria, Secundaria, T√©cnico, Universitario, Posgrado.
- `estado_civil`: Soltero, Casado, Uni√≥n libre, Divorciado, Viudo.
- `fecha_registro`: Fechas entre 2023 y 2024.
- `tiene_vehiculo`: Booleano (True/False).

Aqu√≠ est√° el c√≥digo para generar el DataFrame:

```python
# Importar bibliotecas
import pandas as pd
import numpy as np
from faker import Faker
import random

# Configurar Faker para Colombia
fake = Faker('es_CO')

# Establecer semilla para reproducibilidad
np.random.seed(42)
random.seed(42)
fake.seed_instance(42)

# Crear datos
n = 50
data = {
    'id': range(1, n + 1),
    'nombre': [fake.first_name() for _ in range(n)],
    'edad': np.random.randint(18, 81, n),
    'ciudad': random.choices(
        ['Bogot√°', 'Medell√≠n', 'Cali', 'Barranquilla', 'Cartagena', 'Bucaramanga', 'Pereira'],
        k=n
    ),
    'salario': np.random.randint(1000000, 10000001, n),
    'nivel_educativo': random.choices(
        ['Primaria', 'Secundaria', 'T√©cnico', 'Universitario', 'Posgrado'],
        k=n
    ),
    'estado_civil': random.choices(
        ['Soltero', 'Casado', 'Uni√≥n libre', 'Divorciado', 'Viudo'],
        k=n
    ),
    'fecha_registro': pd.date_range(start='2023-01-01', end='2024-12-31', periods=n),
    'tiene_vehiculo': random.choices([True, False], k=n)
}

# Crear diccionario para mapear ciudades a departamentos
deptos = {
    'Bogot√°': 'Cundinamarca',
    'Medell√≠n': 'Antioquia',
    'Cali': 'Valle del Cauca',
    'Barranquilla': 'Atl√°ntico',
    'Cartagena': 'Bol√≠var',
    'Bucaramanga': 'Santander',
    'Pereira': 'Risaralda'
}

# Crear DataFrame
df = pd.DataFrame(data)

# Asignar departamentos seg√∫n ciudades
df['departamento'] = df['ciudad'].map(deptos)

# Introducir algunos valores nulos para ejemplos posteriores
df.loc[5:7, 'salario'] = np.nan
df.loc[10:12, 'nivel_educativo'] = np.nan

# Convertir fecha_registro a formato datetime
df['fecha_registro'] = pd.to_datetime(df['fecha_registro'])

# Mostrar las primeras 5 filas
print("Primeras 5 filas del DataFrame:")
print(df.head())
```
### Dependencias

```python
# Instalar las dependencias necesarias
!pip install pandas
!pip install numpy
!pip install faker
```

**Ejejmplo de salida (primeras 5 filas)**:

```
   id     nombre  edad       ciudad    departamento   salario nivel_educativo estado_civil fecha_registro  tiene_vehiculo
0   1     Carlos    56      Bogot√°  Cundinamarca  3745597      Secundaria      Casado     2023-01-01           True
1   2      Laura    69    Medell√≠n      Antioquia  7947334      T√©cnico       Viudo     2023-02-14          False
2   3      Diego    46  Barranquilla       Atl√°ntico  1234567      Primaria      Soltero    2023-03-30           True
3   4  Valentina    29        Cali  Valle del Cauca  5678901      Posgrado      Casado     2023-05-14          False
4   5    Juliana    34   Cartagena        Bol√≠var  2345678   Universitario  Uni√≥n libre   2023-06-29           True
```

Este DataFrame contiene datos variados que nos permitir√°n aplicar diferentes t√©cnicas de filtrado.

## Explicaci√≥n avanzada de filtros

A continuaci√≥n, exploraremos todas las formas de filtrar datos en Pandas. Cada t√©cnica incluye ejemplos pr√°cticos con el DataFrame creado, c√≥digo, explicaci√≥n y resultados.

### 1. Filtrado con operadores de comparaci√≥n (`==`, `!=`, `>`, `<`, `>=`, `<=`)

Los operadores de comparaci√≥n permiten filtrar filas basadas en condiciones simples.

**Ejemplo 1: Filtrar personas con salario mayor a 3,000,000 COP**

```python
# Filtrar salarios > 3,000,000
filtro_salario = df['salario'] > 3000000
df_filtrado = df[filtro_salario]
print("Personas con salario mayor a 3,000,000 COP:")
print(df_filtrado[['id', 'nombre', 'salario']].head())
```

**Explicaci√≥n**: Seleccionamos las filas donde el salario es mayor a 3,000,000. El operador `>` genera una m√°scara booleana que aplicamos al DataFrame.

**Salida**:

```
   id     nombre   salario
0   1     Carlos   3745597
1   2      Laura   7947334
3   4  Valentina   5678901
8   9     Andr√©s   8765432
9  10      Sof√≠a   4567890
```

**Ejemplo 2: Filtrar personas con edad menor o igual a 30 a√±os**

```python
# Filtrar edad <= 30
filtro_edad = df['edad'] <= 30
df_filtrado = df[filtro_edad]
print("Personas con edad menor o igual a 30 a√±os:")
print(df_filtrado[['id', 'nombre', 'edad']].head())
```

**Explicaci√≥n**: Usamos `<=` para obtener personas de 30 a√±os o menos.

**Salida**:

```
    id     nombre  edad
3    4  Valentina    29
7    8      Mateo    25
12  13     Daniel    27
18  19       Sara    30
20  21    Gabriel    28
```

### 2. Filtrado con operadores l√≥gicos (`&`, `|`, `~`)

Los operadores l√≥gicos permiten combinar m√∫ltiples condiciones.

**Ejemplo 1: Filtrar personas de Bogot√° con nivel educativo "Universitario"**

```python
# Filtrar ciudad == 'Bogot√°' y nivel_educativo == 'Universitario'
filtro_bogota_univ = (df['ciudad'] == 'Bogot√°') & (df['nivel_educativo'] == 'Universitario')
df_filtrado = df[filtro_bogota_univ]
print("Personas de Bogot√° con nivel educativo Universitario:")
print(df_filtrado[['id', 'nombre', 'ciudad', 'nivel_educativo']].head())
```

**Explicaci√≥n**: Usamos `&` para combinar dos condiciones. Los par√©ntesis aseguran que cada condici√≥n se eval√∫e correctamente.

**Salida**:

```
    id   nombre  ciudad  nivel_educativo
4    5  Juliana  Bogot√°  Universitario
21  22   Miguel  Bogot√°  Universitario
```

**Ejemplo 2: Filtrar personas que no est√©n casadas ni sean de Medell√≠n**

```python
# Filtrar estado_civil != 'Casado' y ciudad != 'Medell√≠n'
filtro_no_casado_no_med = ~(df['estado_civil'] == 'Casado') & (df['ciudad'] != 'Medell√≠n')
df_filtrado = df[filtro_no_casado_no_med]
print("Personas que no est√°n casadas ni son de Medell√≠n:")
print(df_filtrado[['id', 'nombre', 'estado_civil', 'ciudad']].head())
```

**Explicaci√≥n**: Usamos `~` para negar la condici√≥n de "Casado" y `&` para combinar con "no de Medell√≠n".

**Salida**:

```
   id     nombre  estado_civil       ciudad
2   3      Diego      Soltero  Barranquilla
4   5    Juliana  Uni√≥n libre     Cartagena
7   8      Mateo      Soltero         Cali
9  10      Sof√≠a     Divorciado     Bogot√°
```

### 3. M√©todo `isin`

El m√©todo `isin` filtra filas donde una columna contiene valores de una lista.

**Ejemplo 1: Filtrar personas de Bogot√°, Cali o Cartagena**

```python
# Filtrar ciudades espec√≠ficas
filtro_ciudades = df['ciudad'].isin(['Bogot√°', 'Cali', 'Cartagena'])
df_filtrado = df[filtro_ciudades]
print("Personas de Bogot√°, Cali o Cartagena:")
print(df_filtrado[['id', 'nombre', 'ciudad']].head())
```

**Explicaci√≥n**: `isin` verifica si cada valor de `ciudad` est√° en la lista proporcionada.

**Salida**:

```
   id     nombre     ciudad
0   1     Carlos     Bogot√°
3   4  Valentina      Cali
4   5    Juliana  Cartagena
7   8      Mateo      Cali
9  10      Sof√≠a    Bogot√°
```

**Ejemplo 2: Filtrar personas con nivel educativo "T√©cnico" o "Posgrado"**

```python
# Filtrar niveles educativos espec√≠ficos
filtro_educ = df['nivel_educativo'].isin(['T√©cnico', 'Posgrado'])
df_filtrado = df[filtro_educ]
print("Personas con nivel educativo T√©cnico o Posgrado:")
print(df_filtrado[['id', 'nombre', 'nivel_educativo']].head())
```

**Salida**:

```
   id     nombre nivel_educativo
1   2      Laura        T√©cnico
3   4  Valentina       Posgrado
8   9     Andr√©s        T√©cnico
15 16    Mariana       Posgrado
17 18      Paula        T√©cnico
```

### 4. M√©todo `query`

El m√©todo `query` permite filtrar usando una sintaxis similar a SQL.

**Ejemplo 1: Filtrar personas con salario entre 2,000,000 y 5,000,000 COP**

```python
# Filtrar con query
df_filtrado = df.query('2000000 <= salario <= 5000000')
print("Personas con salario entre 2,000,000 y 5,000,000 COP:")
print(df_filtrado[['id', 'nombre', 'salario']].head())
```

**Explicaci√≥n**: `query` usa una expresi√≥n en cadena para definir la condici√≥n.

**Salida**:

```
   id     nombre   salario
0   1     Carlos   3745597
4   5    Juliana   2345678
9  10      Sof√≠a   4567890
12 13     Daniel   3456789
18 19       Sara   2890123
```

**Ejemplo 2: Filtrar personas solteras mayores de 25 a√±os**

```python
# Filtrar con query
df_filtrado = df.query('estado_civil == "Soltero" and edad > 25')
print("Personas solteras mayores de 25 a√±os:")
print(df_filtrado[['id', 'nombre', 'edad', 'estado_civil']].head())
```

**Salida**:

```
    id   nombre  edad estado_civil
2    3    Diego    46      Soltero
18  19     Sara    30      Soltero
29  30  Esteban    41      Soltero
```

### 5. M√©todo `where`

El m√©todo `where` conserva las filas que cumplen la condici√≥n y reemplaza las dem√°s con `NaN`.

**Ejemplo: Mostrar solo los salarios de personas mayores de 40 a√±os**

```python
# Usar where
df_filtrado = df.where(df['edad'] > 40)
print("Salarios de personas mayores de 40 a√±os (resto NaN):")
print(df_filtrado[['id', 'nombre', 'edad', 'salario']].head())
```

**Explicaci√≥n**: Las filas donde `edad <= 40` tienen valores `NaN`.

**Salida**:

```
   id nombre  edad   salario
0   1 Carlos  56.0  3745597.0
1   2 Laura   69.0  7947334.0
2   NaN  NaN    NaN        NaN
3   NaN  NaN    NaN        NaN
4   NaN  NaN    NaN        NaN
```

### 6. M√©todo `mask`

El m√©todo `mask` es opuesto a `where`: reemplaza con `NaN` las filas que cumplen la condici√≥n.

**Ejemplo: Ocultar los salarios de personas con nivel educativo "Primaria"**

```python
# Usar mask
df_filtrado = df.mask(df['nivel_educativo'] == 'Primaria')
print("DataFrame ocultando salarios de nivel educativo Primaria:")
print(df_filtrado[['id', 'nombre', 'nivel_educativo', 'salario']].head())
```

**Explicaci√≥n**: Las filas con `nivel_educativo == 'Primaria'` se convierten en `NaN`.

**Salida**:

```
   id     nombre nivel_educativo   salario
0   1     Carlos      Secundaria  3745597.0
1   2      Laura        T√©cnico  7947334.0
2   NaN       NaN        NaN        NaN
3   4  Valentina       Posgrado  5678901.0
4   5    Juliana   Universitario  2345678.0
```

### 7. Filtrado con `str` para columnas de texto

Los m√©todos `str` permiten filtrar columnas de texto.

**Ejemplo 1: Filtrar nombres que contengan la letra "a"**

```python
# Filtrar nombres con 'a'
filtro_nombres = df['nombre'].str.contains('a', case=False, na=False)
df_filtrado = df[filtro_nombres]
print("Personas con nombres que contienen 'a':")
print(df_filtrado[['id', 'nombre']].head())
```

**Explicaci√≥n**: `str.contains` busca la subcadena 'a' (insensible a may√∫sculas).

**Salida**:

```
   id     nombre
1   2      Laura
3   4  Valentina
4   5    Juliana
7   8      Mateo
8   9     Andr√©s
```

**Ejemplo 2: Filtrar ciudades que empiecen con "B"**

```python
# Filtrar ciudades que empiecen con 'B'
filtro_ciudades_b = df['ciudad'].str.startswith('B')
df_filtrado = df[filtro_ciudades_b]
print("Ciudades que empiezan con 'B':")
print(df_filtrado[['id', 'nombre', 'ciudad']].head())
```

**Salida**:

```
   id   nombre       ciudad
0   1   Carlos      Bogot√°
2   3    Diego  Barranquilla
9  10    Sof√≠a      Bogot√°
14 15  Claudia      Bogot√°
17 18    Paula  Barranquilla
```

### 8. Filtrado con `between`

El m√©todo `between` filtra valores dentro de un rango.

**Ejemplo 1: Filtrar personas con edades entre 25 y 45 a√±os**

```python
# Filtrar edades entre 25 y 45
filtro_edad_rango = df['edad'].between(25, 45)
df_filtrado = df[filtro_edad_rango]
print("Personas con edades entre 25 y 45 a√±os:")
print(df_filtrado[['id', 'nombre', 'edad']].head())
```

**Salida**:

```
    id     nombre  edad
3    4  Valentina    29
4    5    Juliana    34
7    8      Mateo    25
9   10      Sof√≠a    35
12  13     Daniel    27
```

**Ejemplo 2: Filtrar salarios entre 1,500,000 y 4,000,000 COP**

```python
# Filtrar salarios entre 1,500,000 y 4,000,000
filtro_salario_rango = df['salario'].between(1500000, 4000000)
df_filtrado = df[filtro_salario_rango]
print("Personas con salarios entre 1,500,000 y 4,000,000 COP:")
print(df_filtrado[['id', 'nombre', 'salario']].head())
```

**Salida**:

```
   id     nombre   salario
0   1     Carlos   3745597
4   5    Juliana   2345678
12 13     Daniel   3456789
18 19       Sara   2890123
22 23      Sim√≥n   3678901
```

### 9. Filtrado con `isnull` y `notnull`

Los m√©todos `isnull` y `notnull` filtran filas con valores nulos o no nulos.

**Ejemplo 1: Filtrar filas con salario nulo**

```python
# Filtrar salarios nulos
filtro_nulos = df['salario'].isnull()
df_filtrado = df[filtro_nulos]
print("Filas con salario nulo:")
print(df_filtrado[['id', 'nombre', 'salario']].head())
```

**Explicaci√≥n**: Recordemos que introdujimos valores nulos en `salario`.

**Salida**:

```
   id   nombre  salario
5   6   Felipe      NaN
6   7  Valeria      NaN
7   8    Mateo      NaN
```

**Ejemplo 2: Filtrar filas con nivel educativo no nulo**

```python
# Filtrar nivel_educativo no nulo
filtro_no_nulos = df['nivel_educativo'].notnull()
df_filtrado = df[filtro_no_nulos]
print("Filas con nivel educativo no nulo:")
print(df_filtrado[['id', 'nombre', 'nivel_educativo']].head())
```

**Salida**:

```
   id     nombre nivel_educativo
0   1     Carlos      Secundaria
1   2      Laura        T√©cnico
2   3      Diego       Primaria
3   4  Valentina       Posgrado
4   5    Juliana   Universitario
```

### 10. Filtrado con fechas

Podemos filtrar fechas usando comparaciones o m√©todos de fechas.

**Ejemplo 1: Filtrar registros con fecha_registro en 2024**

```python
# Filtrar fechas en 2024
filtro_2024 = df['fecha_registro'].dt.year == 2024
df_filtrado = df[filtro_2024]
print("Registros en 2024:")
print(df_filtrado[['id', 'nombre', 'fecha_registro']].head())
```

**Explicaci√≥n**: Usamos `dt.year` para extraer el a√±o de la columna `fecha_registro`.

**Salida**:

```
    id     nombre fecha_registro
25  26   Natalia     2024-01-14
26  27     Pedro     2024-02-28
27  28   Luciana     2024-04-14
28  29     Camilo    2024-05-29
29  30   Esteban     2024-07-14
```

**Ejemplo 2: Filtrar registros entre dos fechas espec√≠ficas**

```python
# Filtrar entre 1 de junio de 2023 y 31 de diciembre de 2023
filtro_fechas = df['fecha_registro'].between('2023-06-01', '2023-12-31')
df_filtrado = df[filtro_fechas]
print("Registros entre 1 de junio y 31 de diciembre de 2023:")
print(df_filtrado[['id', 'nombre', 'fecha_registro']].head())
```

**Salida**:

```
    id   nombre fecha_registro
4    5  Juliana     2023-06-29
5    6   Felipe     2023-08-14
6    7  Valeria     2023-09-29
7    8    Mateo     2023-11-14
8    9   Andr√©s     2023-12-30
```

## Buenas pr√°cticas y consejos

- **Combinar condiciones eficientemente**: Usa par√©ntesis para agrupar condiciones l√≥gicas y evitar errores de precedencia. Por ejemplo: `(df['col1'] > 10) & (df['col2'] == 'valor')`.
- **Verificar tipos de datos**: Antes de filtrar, aseg√∫rate de que las columnas tengan el tipo correcto. Por ejemplo, convierte fechas a `datetime` con `pd.to_datetime`.
- **Evitar `SettingWithCopyWarning`**: Si planeas modificar un DataFrame filtrado, usa `.copy()` para crear una copia expl√≠cita. Ejemplo: `df_filtrado = df[df['col'] > 10].copy()`.
- **Optimiza con `query` para condiciones complejas**: Es m√°s legible y, en algunos casos, m√°s eficiente para combinar m√∫ltiples condiciones.
- **Prueba tus filtros**: Visualiza las primeras filas (`head()`) o usa `shape` para confirmar que el filtro devuelve los resultados esperados.

---

## Actividades pr√°cticas

### C√≥digo para crear el DataFrame necesario para las actividades

```python
# Importar bibliotecas
import pandas as pd
import numpy as np
from faker import Faker
import random

# Configurar Faker para Colombia
fake = Faker('es_CO')

# Establecer semilla para reproducibilidad
np.random.seed(123)
random.seed(123)
fake.seed_instance(123)

# Crear datos
n = 50
data = {
    'id': range(1, n + 1),
    'nombre_completo': [fake.name() for _ in range(n)],
    'edad': np.random.randint(15, 76, n),
    'region': random.choices(
        ['Caribe', 'Andina', 'Pac√≠fica', 'Orinoqu√≠a', 'Amazon√≠a'],
        weights=[0.3, 0.4, 0.15, 0.1, 0.05],
        k=n
    ),
    'municipio': random.choices(
        [
            'Barranquilla', 'Santa Marta', 'Cartagena',  # Caribe
            'Bogot√°', 'Medell√≠n', 'Tunja', 'Manizales',  # Andina
            'Cali', 'Quibd√≥', 'Buenaventura',           # Pac√≠fica
            'Villavicencio', 'Yopal',                    # Orinoqu√≠a
            'Leticia', 'Puerto In√≠rida'                  # Amazon√≠a
        ],
        k=n
    ),
    'ingreso_mensual': np.random.randint(800000, 12000001, n),
    'ocupacion': random.choices(
        [
            'Estudiante', 'Docente', 'Comerciante', 'Agricultor',
            'Ingeniero', 'M√©dico', 'Desempleado', 'Pensionado',
            'Emprendedor', 'Obrero'
        ],
        k=n
    ),
    'tipo_vivienda': random.choices(
        ['Propia', 'Arrendada', 'Familiar'],
        k=n
    ),
    'fecha_nacimiento': [
        fake.date_of_birth(minimum_age=15, maximum_age=75) for _ in range(n)
    ],
    'acceso_internet': random.choices([True, False], weights=[0.7, 0.3], k=n)
}

# Crear DataFrame
df_nuevo = pd.DataFrame(data)

# Introducir algunos valores nulos
df_nuevo.loc[3:5, 'ingreso_mensual'] = np.nan
df_nuevo.loc[15:17, 'ocupacion'] = np.nan

# Convertir fecha_nacimiento a datetime
df_nuevo['fecha_nacimiento'] = pd.to_datetime(df_nuevo['fecha_nacimiento'])

# Mostrar las primeras 5 filas
print("Primeras 5 filas del nuevo DataFrame:")
print(df_nuevo.head())
```

---

### Estructura del DataFrame

1. **id**: Entero √∫nico (1 a 50).
2. **nombre_completo**: Cadena con nombres (ej. "Juan P√©rez").
3. **edad**: Entero aleatorio (15 a 75 a√±os).
4. **region**: Cadena categ√≥rica (Caribe, Andina, Pac√≠fica, Orinoqu√≠a, Amazon√≠a; con pesos: 30%, 40%, 15%, 10%, 5%).
5. **municipio**: Cadena categ√≥rica (14 municipios, ej. Barranquilla, Bogot√°, Cali).
6. **ingreso_mensual**: Entero aleatorio (800,000 a 12,000,000 COP; nulos en filas 3-5).
7. **ocupacion**: Cadena categ√≥rica (10 opciones, ej. Estudiante, M√©dico; nulos en filas 15-17).
8. **tipo_vivienda**: Cadena categ√≥rica (Propia, Arrendada, Familiar).
9. **fecha_nacimiento**: Fecha (datetime, 1949-2009, acorde a edad 15-75).
10. **acceso_internet**: Booleano (True/False; 70% True, 30% False).


### Actividad 1: Practica de filtrado en Pandas (Google Colab)

Esta actividad est√° dise√±ada para que practiques las t√©cnicas de filtrado en Pandas explicadas previamente (operadores de comparaci√≥n, l√≥gicos, `isin`, `query`, `where`, `mask`, `str`, `between`, `isnull`, `notnull` y fechas). Usa el DataFrame creado (`df_nuevo`) para resolver los siguientes **30 ejercicios**. Cada ejercicio incluye una instrucci√≥n clara y el m√©todo de filtrado sugerido, aunque puedes experimentar con otros enfoques si lo deseas.

**Instrucciones generales**:

- Escribe el c√≥digo para cada ejercicio en Python usando Pandas.
- Muestra las primeras 5 filas del resultado (o un resumen si es necesario) con `print(df_filtrado.head())`.
- Si el resultado est√° vac√≠o, indica por qu√© crees que ocurri√≥.
- Adjuntar el enlace compartido del notebook de Google Colab en el archivo üìå_M2_Actividad_3.py del proyecto integrador..


#### Ejercicios

#### 1. Operadores de comparaci√≥n
- **Filtrar personas con ingreso mensual mayor a 5,000,000 COP**  
   Usa el operador `>`.

- **Filtrar personas con edad menor a 25 a√±os**  
   Usa el operador `<`.

- **Filtrar personas cuya ocupaci√≥n sea exactamente "Estudiante"**  
   Usa el operador `==`.

- **Filtrar personas que no vivan en vivienda "Propia"**  
   Usa el operador `!=`.

- **Filtrar personas con edad mayor o igual a 60 a√±os**  
   Usa el operador `>=`.

#### 2. Operadores l√≥gicos

- **Filtrar personas de la regi√≥n Andina que tengan ingreso mensual mayor a 3,000,000 COP**  
   Usa `&`.

- **Filtrar personas que sean Estudiantes o Docentes**  
   Usa `|`.

- **Filtrar personas que no sean de la regi√≥n Caribe**  
   Usa `~`.

- **Filtrar personas menores de 30 a√±os que vivan en vivienda Arrendada**  
   Usa `&`.

- **Filtrar personas que no sean Comerciantes ni tengan ingreso menor a 1,000,000 COP**  
    Usa `~` y `|`.

#### 3. M√©todo `isin`
- **Filtrar personas de los municipios Bogot√°, Cali o Cartagena**  
    Usa `isin`.

- **Filtrar personas con ocupaciones "Ingeniero", "M√©dico" o "Emprendedor"**  
    Usa `isin`.

- **Filtrar personas de las regiones Caribe o Pac√≠fica**  
    Usa `isin`.

- **Filtrar personas con tipo de vivienda "Propia" o "Familiar"**  
    Usa `isin`.

#### 4. M√©todo `query`
- **Filtrar personas con ingreso mensual entre 1,500,000 y 4,000,000 COP**  
    Usa `query`.

- **Filtrar personas mayores de 40 a√±os que sean Pensionados**  
    Usa `query`.

- **Filtrar personas de la regi√≥n Orinoqu√≠a con acceso a internet**  
    Usa `query`.

- **Filtrar personas que no sean Estudiantes y tengan edad menor a 20 a√±os**  
    Usa `query`.

#### 5. M√©todo `where`
- **Mostrar solo los ingresos mensuales de personas mayores de 50 a√±os (resto NaN)**  
    Usa `where`.

- **Mostrar los datos de personas de la regi√≥n Amazon√≠a (resto NaN)**  
    Usa `where`.

#### 6. M√©todo `mask`
- **Ocultar los ingresos mensuales de personas con ocupaci√≥n "Desempleado" (convertir a NaN)**  
    Usa `mask`.

- **Ocultar los datos de personas menores de 18 a√±os (convertir a NaN)**  
    Usa `mask`.

#### 7. Filtrado con `str`
- **Filtrar personas cuyo nombre completo contenga "Mar√≠a"**  
    Usa `str.contains`.

- **Filtrar municipios que empiecen con "B"**  
    Usa `str.startswith`.

- **Filtrar personas cuyo nombre completo termine con "ez"**  
    Usa `str.endswith`.

#### 8. Filtrado con `between`
- **Filtrar personas con edades entre 20 y 35 a√±os**  
    Usa `between`.

- **Filtrar personas con ingresos mensuales entre 2,000,000 y 6,000,000 COP**  
    Usa `between`.

#### 9. Filtrado con `isnull` y `notnull`
- **Filtrar filas con ingreso mensual nulo**  
    Usa `isnull`.

- **Filtrar filas con ocupaci√≥n no nula**  
    Usa `notnull`.

#### 10. Filtrado con fechas
- **Filtrar personas nacidas despu√©s del 1 de enero de 1990**  
    Usa comparaci√≥n de fechas.

---

### Actividad 2: Desarrollar una aplicaci√≥n de filtros din√°micos en Streamlit.


**Instrucciones generales**:

- Uso del DataFrame para las actividades:
    - Desarrolar la actividad en el archivo üìå_M2_Actividad_3.py del proyecto integrador.
    - Desarrollar una aplicaci√≥n de filtros din√°micos en Streamlit.
    - Cada filtro debe ser configurable desde la barra lateral (`st.sidebar`) y aplicarse solo si el usuario lo activa.


#### Dise√±o de los 10 filtros din√°micos

Cada filtro debe ser configurable desde la barra lateral (`st.sidebar`) y aplicarse solo si el usuario lo activa. Los filtros se basar√°n en las t√©cnicas de filtrado del tutorial (operadores de comparaci√≥n, l√≥gicos, `isin`, `query`, `where`, `mask`, `str`, `between`, `isnull`/`notnull`, fechas). A continuaci√≥n, se describen los 10 filtros:


#### 1. **Filtro por rango de edad (usando `between`)**:
- **Descripci√≥n**: Filtra personas dentro de un rango de edad seleccionado.
- **Controles**:
  - Checkbox para activar/desactivar: "Filtrar por rango de edad".
  - Dos sliders (`st.slider`) para seleccionar el rango de edad (m√≠nimo: 15, m√°ximo: 75).
- **Implementaci√≥n**:
  - Usar `df_nuevo['edad'].between(min_edad, max_edad)` para filtrar.
  - Aplicar el filtro solo si el checkbox est√° activado.

#### 2. **Filtro por municipios espec√≠ficos (usando `isin`)**:
- **Descripci√≥n**: Filtra personas de uno o m√°s municipios seleccionados.
- **Controles**:
  - Checkbox: "Filtrar por municipios".
  - Multiselect (`st.multiselect`) con opciones: ['Barranquilla', 'Santa Marta', 'Cart?ÔøΩgena', 'Bogot√°', 'Medell√≠n', 'Tunja', 'Manizales', 'Cali', 'Quibd√≥', 'Buenaventura', 'Villavicencio', 'Yopal', 'Leticia', 'Puerto In√≠rida'].
- **Implementaci√≥n**:
  - Usar `df_nuevo['municipio'].isin(municipios_seleccionados)`.
  - Si no se selecciona ning√∫n municipio, no aplicar el filtro.

#### 3. **Filtro por ingreso mensual m√≠nimo (usando operador `>`)**:
- **Descripci√≥n**: Filtra personas con ingreso mensual mayor a un valor especificado.
- **Controles**:
  - Checkbox: "Filtrar por ingreso mensual m√≠nimo".
  - Slider para seleccionar el ingreso m√≠nimo (rango: 800,000 a 12,000,000 COP).
- **Implementaci√≥n**:
  - Usar `df_nuevo['ingreso_mensual'] > ingreso_minimo`.

#### 4. **Filtro por ocupaci√≥n (usando `isin`)**:
- **Descripci√≥n**: Filtra personas con una o m√°s ocupaciones seleccionadas.
- **Controles**:
  - Checkbox: "Filtrar por ocupaci√≥n".
  - Multiselect con opciones: ['Estudiante', 'Docente', 'Comerciante', 'Agricultor', 'Ingeniero', 'M√©dico', 'Desempleado', 'Pensionado', 'Emprendedor', 'Obrero'].
- **Implementaci√≥n**:
  - Usar `df_nuevo['ocupacion'].isin(ocupaciones_seleccionadas)`.

#### 5. **Filtro por tipo de vivienda no propia (usando operador `!=` y `~`)**:
- **Descripci√≥n**: Filtra personas que no viven en vivienda propia.
- **Controles**:
  - Checkbox: "Filtrar personas sin vivienda propia".
- **Implementaci√≥n**:
  - Usar `~(df_nuevo['tipo_vivienda'] == 'Propia')`.

#### 6. **Filtro por nombres que contienen una cadena (usando `str.contains`)**:
- **Descripci√≥n**: Filtra personas cuyos nombres completos contienen una cadena especificada.
- **Controles**:
  - Checkbox: "Filtrar por nombre".
  - Text input (`st.text_input`) para ingresar la subcadena (ej. "a").
- **Implementaci√≥n**:
  - Usar `df_nuevo['nombre_completo'].str.contains(texto, case=False, na=False)`.

#### 7. **Filtro por a√±o de nacimiento espec√≠fico (usando fechas)**:
- **Descripci√≥n**: Filtra personas seg√∫n el a√±o de `fecha_nacimiento`.
- **Controles**:
  - Checkbox: "Filtrar por a√±o de nacimiento".
  - Selectbox (`st.selectbox`) con opciones: [range(1949, 2010)] (calculado como 2024 - 75 hasta 2024 - 15).
- **Implementaci√≥n**:
  - Usar `df_nuevo['fecha_nacimiento'].dt.year == a√±o_seleccionado`.

#### 8. **Filtro por acceso a internet (usando operador `==`)**:
- **Descripci√≥n**: Filtra personas que tienen o no tienen acceso a internet.
- **Controles**:
  - Checkbox: "Filtrar por acceso a internet".
  - Radio button (`st.radio`) con opciones: ["S√≠", "No"].
- **Implementaci√≥n**:
  - Usar `df_nuevo['acceso_internet'] == True` o `df_nuevo['acceso_internet'] == False` seg√∫n la selecci√≥n.

#### 9. **Filtro por ingresos nulos (usando `isnull`)**:
- **Descripci√≥n**: Filtra filas con valores nulos en la columna `ingreso_mensual`.
- **Controles**:
  - Checkbox: "Filtrar por ingresos nulos".
- **Implementaci√≥n**:
  - Usar `df_nuevo['ingreso_mensual'].isnull()`.

#### 10. **Filtro por rango de fechas de nacimiento (usando `between` para fechas)**:
- **Descripci√≥n**: Filtra personas nacidas dentro de un rango de fechas en `fecha_nacimiento`.
- **Controles**:
  - Checkbox: "Filtrar por rango de fechas de nacimiento".
  - Dos date inputs (`st.date_input`) para seleccionar fecha inicial y final (rango: 1949-01-01 a 2009-12-31).
- **Implementaci√≥n**:
  - Usar `df_nuevo['fecha_nacimiento'].between(fecha_inicio, fecha_fin)`.

--- 

